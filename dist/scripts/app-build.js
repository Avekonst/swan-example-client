"bundle";!function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <require from="component/core/nav-bar.html"></require>\n  <require from="humane-js/themes/jackedup.css"></require>\n\n  <nav-bar router.bind="router" username.bind="username" authenticated.bind="authenticated"></nav-bar>\n  <div class="container">\n    <div class="row">\n      <div class="col-sm-12">\n        <h1 class="page-header" t="${router.currentInstruction.config.title}"></h1>\n        <router-view></router-view>\n      </div>\n    </div>\n  </div>\n</template>\n'})}(),System.register("app.js",["aurelia-framework","aurelia-router","aurelia-authentication"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.inject},function(a){e=a.Router},function(a){f=a.AuthService}],execute:function(){a("App",(g=d(e,f),i=g(h=function a(b,d){c(this,a),this.router=b;var e=d.getTokenPayload();this.username=e?e.username:null,this.authenticated=d.isAuthenticated()})||h)),a("App",i)}}}),function(){var a=System.amdDefine;a("component/core/nav-bar.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template bindable="router,username,authenticated">\n  <nav class="navbar navbar-inverse navbar-fixed-top">\n    <div class="container">\n      <div class="navbar-header">\n        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">\n          <span class="sr-only">Toggle navigation</span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n          <span class="icon-bar"></span>\n        </button>\n        <a class="navbar-brand" href="#" t="Swan"></a>\n      </div>\n      <div id="navbar" class="collapse navbar-collapse">\n        <ul class="nav navbar-nav">\n          <li repeat.for="row of router.navigation | authFilter: authenticated" class="${row.isActive ? \'active\' : \'\'}">\n            <a href.bind="row.href"><span t="${row.title}"></span></a>\n          </li>\n        </ul>\n\n        <p class="navbar-text navbar-right">\n          <span t="Signed in as"></span> ${username} <a href="#/logout" class="navbar-link">(<span t="logout"></span>)</a>\n        </p>\n      </div>\n    </div>\n  </nav>\n</template>\n'})}(),System.register("component/value-converters/date-format.js",["moment"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.default}],execute:function(){a("DateFormatValueConverter",e=function(){function a(){c(this,a)}return a.prototype.toView=function(a,b){return d(a).format(b)},a}()),a("DateFormatValueConverter",e)}}}),System.register("config/routes.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",[{route:"",name:"index",moduleId:"page/index",nav:!0,auth:!0,title:"Home"},{route:"/login",name:"login",moduleId:"page/auth/login",nav:!0,auth:!1,title:"Login"},{route:"logout",name:"logout",moduleId:"page/auth/logout",title:"Logout"},{route:"/lists",name:"lists",moduleId:"page/todo/list",nav:!0,auth:!0,title:"Todo lists"},{route:"/lists/create",name:"lists/create",auth:!0,moduleId:"page/todo/create-list",title:"Create list"},{route:"/datatable",name:"datatable",moduleId:"page/datatable/demo",nav:!0,auth:!0,title:"Datatable"},{route:"/pager",name:"pager",moduleId:"page/pager/demo",nav:!0,auth:!0,title:"Pager"},{route:"/association-select",name:"association-select",moduleId:"page/association-select/demo",nav:!0,auth:!0,title:"Association select"},{route:"/paged",name:"paged",moduleId:"page/paged/demo",nav:!0,auth:!0,title:"Paged"},{route:"/form",name:"form",moduleId:"page/form/demo",nav:!0,auth:!0,title:"Form"}])}}}),System.register("config/app.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",{title:"My SpoonX application",endpoints:[{name:"api",endpoint:"http://127.0.0.1:1337/",default:!0},{name:"auth",endpoint:"http://127.0.0.1:1337/"}],defaultLocale:{language:"nl",locale:"nl-NL"}})}}}),System.register("config/auth.js",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",{endpoint:"auth",configureEndpoints:["auth","api"],baseUrl:"auth",loginUrl:"/login",signupUrl:"/signup",loginRedirect:"/",profileUrl:"/me",refreshTokenUrl:"/refresh-token",useRefreshToken:!0})}}}),System.register("entity/list.js",["aurelia-orm","aurelia-validation","aurelia-binding"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){h=a.Entity,i=a.validatedResource,j=a.association},function(a){k=a.ValidationRules},function(a){l=a.observable}],execute:function(){a("ListEntity",(m=i("list"),n=l(),o=j({collection:"todo"}),s=m((q=function(a){function b(){d(this,b);var f=e(this,a.call(this));return f.name=null,c(f,"todos",r,f),k.ensure("name").required().on(f),f}return f(b,a),b}(h),r=g(q.prototype,"todos",[n,o],{enumerable:!0,initializer:function(){return[]}}),p=q))||p)),a("ListEntity",s)}}}),System.register("entity/todo.js",["aurelia-orm","aurelia-validation","aurelia-binding"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return{setters:[function(a){h=a.Entity,i=a.validatedResource,j=a.type},function(a){k=a.ValidationRules},function(a){l=a.observable}],execute:function(){a("TodoEntity",(m=i("todo"),n=l(),o=j("string"),p=l(),q=j("boolean"),v=m((s=function(a){function b(){d(this,b);var f=e(this,a.call(this));return c(f,"todo",t,f),c(f,"done",u,f),k.ensure("todo").required().on(f),f}return f(b,a),b}(h),t=g(s.prototype,"todo",[n,o],{enumerable:!0,initializer:function(){return""}}),u=g(s.prototype,"done",[p,q],{enumerable:!0,initializer:function(){return!1}}),r=s))||r)),a("TodoEntity",v)}}}),System.register("config/entities.js",["entity/list","entity/todo"],function(a,b){"use strict";return{setters:[function(b){var c={};c.ListEntity=b.ListEntity,a(c)},function(b){var c={};c.TodoEntity=b.TodoEntity,a(c)}],execute:function(){}}}),System.register("main.js",["config/routes","config/app","config/auth","config/entities","i18next-xhr-backend","aurelia-router","aurelia-authentication","bootstrap","fetch"],function(a,b){"use strict";function c(a){a.use.standardConfiguration().plugin("aurelia-validation").plugin("aurelia-api",function(a){f.endpoints.forEach(function(b){a.registerEndpoint(b.name,b.endpoint,b.config),b.default&&a.setDefaultEndpoint(b.name)})}).plugin("aurelia-authentication",function(a){a.configure(g)}).plugin("aurelia-orm",function(a){a.registerEntities(h)}).plugin("aurelia-notification",function(a){a.configure({notifications:{success:"humane-jackedup-success",error:"humane-jackedup-error",info:"humane-jackedup-info"}})}).plugin("aurelia-i18n",function(a){a.i18next.use(i),a.setup({backend:{loadPath:"scripts/config/locale/{{lng}}/{{ns}}.json"},lng:f.defaultLocale.language,attributes:["t"],fallbackLng:f.defaultLocale.language,debug:!1})}).plugin("aurelia-datatable").plugin("aurelia-pager").plugin("aurelia-form").globalResources("component/value-converters/date-format"),a.use.developmentLogging(),a.start().then(function(a){a.container.get(j).configure(d),a.setRoot("app")})}function d(a){a.title=f.title,a.addPipelineStep("authorize",k),a.map(e)}var e,f,g,h,i,j,k;return a("configure",c),{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a},function(a){i=a.default},function(a){j=a.Router},function(a){k=a.AuthorizeStep},function(a){},function(a){}],execute:function(){}}}),function(){var a=System.amdDefine;a("page/association-select/demo.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <div class="panel panel-primary">\n    <div class="panel-heading" t="Association select from database \'todo\'"></div>\n    <div class="panel-body">\n      <association-select\n        resource="list"\n        property="name"\n        error.bind="listError"\n        value.bind="listId"\n        if.bind="!listError"\n      ></association-select>\n      <div class="alert alert-warning" if.bind="!!listError">\n        <span t="Error loading lists: "></span>${listError.statusText}\n      </div>\n\n      <div if.bind="!listError">\n        <association-select\n          resource="todo"\n          property="todo"\n          error.bind="todoError"\n          value.bind="todoId"\n          criteria.bind="listId ? {where:{list:listId}} : {}"\n          if.bind="!todoError"\n        ></association-select>\n        <div class="alert alert-warning" if.bind="!!todoError">\n          <span t="Error loading lists: "></span>${todoError.statusText}\n        </div>\n      </div>\n\n      <div class="panel panel-primary">\n        <div class="panel-body">\n          <div class="panel panel-default">\n            <div class="panel-body">\n            <span t="Selected: "></span>${listId} :  ${todoId}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'})}(),System.register("page/association-select/demo.js",["aurelia-dependency-injection","aurelia-orm"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.EntityManager}],execute:function(){a("Demo",(f=d(e),h=f(g=function a(b){c(this,a),this.todoRepository=b.getRepository("todo"),this.listRepository=b.getRepository("list")})||g)),a("Demo",h)}}}),function(){var a=System.amdDefine;a("page/auth/login.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <form submit.delegate="login()">\n    <div class="form-group">\n      <label for="username" t="Username"></label>\n      <input type="text" class="form-control" id="username" t="[placeholder]Username" value.bind="username">\n    </div>\n    <div class="form-group">\n      <label for="password" t="Password"></label>\n      <input type="password" class="form-control" id="password" t="[placeholder]Password" value.bind="password">\n    </div>\n    <button type="submit" class="btn btn-default">Login</button>\n  </form>\n</template>\n'})}(),System.register("page/auth/login.js",["aurelia-dependency-injection","aurelia-authentication","aurelia-notification"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.inject},function(a){e=a.AuthService},function(a){f=a.Notification}],execute:function(){a("Login",(g=d(e,f),i=g(h=function(){function a(b,d){c(this,a),this.username="",this.password="",this.notification=d,this.authService=b}return a.prototype.login=function(){var a=this;return this.authService.login({username:this.username,password:this.password}).catch(function(b){a.notification.error("Login failed!"),console.error(b)})},a}())||h)),a("Login",i)}}}),function(){var a=System.amdDefine;a("page/auth/logout.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return"<template></template>\n"})}(),System.register("page/auth/logout.js",["aurelia-authentication","aurelia-dependency-injection"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.AuthService},function(a){e=a.inject}],execute:function(){a("Logout",(f=e(d),h=f(g=function(){function a(b){c(this,a),this.authService=b}return a.prototype.activate=function(){return this.authService.logout()},a}())||g)),a("Logout",h)}}}),function(){var a=System.amdDefine;a("page/datatable/demo.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <p t="This example reads the todos to fill the datatable"></p>\n\n  <datatable\n    destroyed.delegate="myEventCallback($event)"\n    columns="id, todo as title, list.name as List, done as checked, createdAt as date | dateFormat:\'M/D/YYYY\'"\n    repository.bind="todoRepository"\n    search-column="todo"\n    searchable\n    sortable\n    edit.call="myFunctionCallback($event)"\n    destroy\n    actions.bind="actions"\n    populate="list"\n  ></datatable>\n\n</template>\n'})}(),System.register("page/datatable/demo.js",["aurelia-dependency-injection","aurelia-orm"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.EntityManager}],execute:function(){a("Demo",(f=d(e),h=f(g=function(){function a(b){var d=this;c(this,a),this.actions=[{icon:"flag",title:"My Title",type:"primary",action:function(a){d.customAction(a)},disabled:function(a){return a.id%2==0}}],this.todoRepository=b.getRepository("todo")}return a.prototype.customAction=function(a){console.log("Custom action was triggerd with data: ",a)},a.prototype.myEventCallback=function(a){console.log('Event "%s" was triggerd',a)},a.prototype.myFunctionCallback=function(a){console.log("Edit was triggerd with data:",a)},a}())||g)),a("Demo",h)}}}),function(){var a=System.amdDefine;a("page/form/demo.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n\n  <section class="row fluid-container">\n\n    <div class="col-xs-4">\n      <h3 t="feedback">Feedback</h3>\n      <schema-form\n        schema.bind="feedbackForm.schema"\n        model.bind ="feedbackForm.model">\n      </schema-form>\n    </div>\n\n    <div class="col-xs-4">\n      <h3>${loginForm.model.email}</h3>\n      <schema-form\n        schema.bind="loginForm.schema"\n        model.bind ="loginForm.model">\n      </schema-form>\n    </div>\n\n    <div class="col-xs-4">\n      <h3 t="pet.owner"></h3>\n      <schema-form\n        schema.bind="petOwnerForm.schema"\n        model.bind ="petOwnerForm.model">\n      </schema-form>\n    </div>\n\n    <div class="col-xs-4">\n      <h3 t="product"></h3>\n      <schema-form\n        schema.bind="productForm.schema"\n        model.bind ="productForm.model">\n      </schema-form>\n    </div>\n\n    <div class="col-xs-4">\n      <h3 t="todo">Todo</h3>\n      <entity-form entity.bind="entity"></entity-form>\n    </div>\n\n  </section>\n\n</template>\n'})}(),System.register("page/form/demo.js",["aurelia-framework","aurelia-orm"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function d(){var a=[{key:"name",type:"string",attributes:{placeholder:"name"}},{key:"feedback",type:"textarea"}],b={name:"",feedback:"I like your product"};return{schema:a,model:b}}function e(){var a={name:"Bread",tags:[{name:"Basics",color:"#FF3333"},{name:"Brown",color:"#992233"}]},b=function(b,c,d){a.tags.splice(c,1)},c=function(b,c,d){a.tags.push({name:"",color:"#ffffff"})},d=[{key:"name",type:"string",attributes:{placeholder:"tag name"}},{key:"color",type:"color"},{type:"buttons",actions:[{label:"remove",action:b,attributes:{class:"btn btn-warning"}}]}],e=[{key:"name",type:"string"},{key:"tags",type:"collection",schema:d},{type:"buttons",actions:[{label:"add tag",action:c,attributes:{class:"btn btn-primary"}}]}];return{schema:e,model:a}}function f(a){var b=["cat","dog"],c=[],d=function(){return c.length=0,b.forEach(function(a){c.push({name:h(a),value:a})}),c};c=d();var e={food:"other",favorite:"cat",pets:b},f=[{key:"food",type:"select",options:["Brand",{name:"Other"},{value:"Basic"},{name:"Premium",value:"premium"}]},{key:"pets",type:"checkboxes",options:[{name:"Parrot",value:"parrot"},{name:"Dog",value:"dog"},{name:"Cat",value:"cat"}]},{key:"favorite",type:"radios",options:c}];return a.collectionObserver(b).subscribe(d),{model:e,schema:f}}function g(){var a={email:"info@spoonx.nl",password:"",remember:!1,pet:["dog"]},b=[{key:"email",type:"email"},{key:"password",type:"password"},{key:"remember",type:"boolean"}];return{model:a,schema:b}}function h(a){return a.charAt(0).toUpperCase()+a.slice(1)}var i,j,k,l,m,n;return{setters:[function(a){i=a.BindingEngine,j=a.inject},function(a){k=a.EntityManager}],execute:function(){a("Demo",(l=j(i,k),n=l(m=function a(b,h){c(this,a),this.entity=h.getEntity("todo"),this.petOwnerForm=f(b),this.loginForm=g(),this.productForm=e(),this.feedbackForm=d()})||m)),a("Demo",n)}}}),function(){var a=System.amdDefine;a("page/index.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <h2>\n    <span t="Hello developer"></span>\n    <small t="(I\'d say world, but you are my world <3)"></small>\n  </h2>\n\n  <p t="Welcome to your todo application"></p>\n</template>\n'})}(),System.register("page/index.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("Index",d=function a(){c(this,a)}),a("Index",d)}}}),function(){var a=System.amdDefine;a("page/paged/demo.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <div class="panel panel-primary">\n    <div class="panel-heading" t="Database from todo: page:2 limit:2"></div>\n    <div class="panel-body">\n      <paged repository.bind="todoRepository" data.bind="data" limit=2 page=2 error.bind="error">\n        <div repeat.for="todo of data" if.bind="!error">\n          <div class="row">\n            <div class="col-xs-4">${todo.todo}</div>\n            <div class="col-xs-4">${todo.list.name}</div>\n            <div class="col-xs-4"><a href=mailto:${todo.user.username}>${todo.user.username}</a></div>\n          </div>\n        </div>\n\n        <div class="alert alert-warning" if.bind="!!error">\n          <span t="Yeah, that didn\'t work!"></span>\n          <p><span t="Error: "></span>${error.statusText}</p>\n        </div>\n      </paged>\n    </div>\n  </div>\n\n  <div class="panel panel-primary">\n    <div class="panel-heading" t="Database error"></div>\n    <div class="panel-body">\n      <paged repository.bind="notARepository" data.bind="noData" error.bind="otherError">\n        <div repeat.for="todo of noData" if.bind="!otherError">\n          This shouldn\'t be visible\n        </div>\n\n        <div class="alert alert-warning" if.bind="!!otherError">\n          <span t="Yeah, that didn\'t work!"></span>\n          <p><span t="Error: "></span>${otherError.statusText}</p>\n        </div>\n      </paged>\n    </div>\n  </div>\n</template>\n'})}(),System.register("page/paged/demo.js",["aurelia-dependency-injection","aurelia-orm"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.EntityManager}],execute:function(){a("Demo",(f=d(e),h=f(g=function a(b){c(this,a),this.todoRepository=b.getRepository("todo"),this.notARepository=b.getRepository("ups")})||g)),a("Demo",h)}}}),function(){var a=System.amdDefine;a("page/pager/demo.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <p t="User generated data"></p>\n  <pager resource.bind="pagerData"></pager>\n\n  <p t="Database generated data (from todo)"></p>\n  <pager resource.bind="todoRepository"></pager>\n\n  <p t="Setting the limit and pagerange"></p>\n  <pager resource.bind="pagerData" limit.bind="1" pagerange.bind="1"></pager>\n</template>\n'})}(),System.register("page/pager/demo.js",["aurelia-dependency-injection","aurelia-orm"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.EntityManager}],execute:function(){a("Demo",(f=d(e),h=f(g=function a(b){c(this,a),this.todoRepository=b.getRepository("todo");for(var d=[],e=0;e<500;e++)d.push({id:e});this.pagerData=d})||g)),a("Demo",h)}}}),function(){var a=System.amdDefine;a("page/todo/create-list.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <form submit.delegate="save()">\n    <div class="form-group">\n      <input type="text" class="form-control" t="[placeholder]What todo, what todo..." value.bind="list.name & validate">\n    </div>\n    <button type="submit" class="btn btn-success" t="Create list" disabled.bind="controller.errors.length"></button>\n  </form>\n</template>\n'})}(),System.register("page/todo/create-list.js",["aurelia-dependency-injection","aurelia-orm","aurelia-router","aurelia-notification","aurelia-validation","aurelia-form-renderer-bootstrap"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){d=a.inject,e=a.NewInstance},function(a){f=a.EntityManager},function(a){g=a.Router},function(a){h=a.Notification},function(a){i=a.ValidationController,j=a.validateTrigger},function(a){k=a.FormRendererBootstrap}],execute:function(){a("CreateList",(l=d(f,g,h,e.of(i)),n=l(m=function(){function a(b,d,e,f){c(this,a),this.notification=e,this.router=d,this.list=b.getEntity("list"),this.controller=f,this.controller.addRenderer(new k),this.controller.validateTrigger=j.change}return a.prototype.save=function(){var a=this;this.controller.validate().then(function(b){if(0===b.length)return a.list.save().then(function(){a.notification.success("List saved successfully!"),a.router.navigate("lists")});throw b[0]}).catch(function(a){})},a}())||m)),a("CreateList",n)}}}),function(){var a=System.amdDefine;a("page/todo/list.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template>\n  <div class="row">\n    <div class="col-md-3" repeat.for="list of lists">\n      <div class="panel panel-primary">\n        <div class="panel-heading">\n          <span\n            class="panel-title pull-left"\n            contenteditable="true"\n            textcontent.bind="list.name"\n            keypress.delegate="keypress($event, list)"\n          ></span>\n          <a class="pointer panel-title pull-right" click.delegate="destroy($index)">\n            <span class="fa fa-trash"></span>\n          </a>\n          <span class="clearfix"></span>\n        </div>\n        <div class="panel-body">\n          <div class="panel panel-default" repeat.for="todo of list.todos">\n            <div class="panel-body">\n              ${todo.todo}\n            </div>\n            <div class="panel-footer">\n              <span class="pull-left">\n                <input type="checkbox" checked.bind="todo.done" click.trigger="updated(todo)">\n              </span>\n              <span class="pull-right">\n                <a class="pointer panel-title pull-right" click.delegate="destroyTodo(list, $index)">\n                  <span class="fa fa-trash"></span>\n                </a>\n              </span>\n              <span class="clearfix"></span>\n            </div>\n          </div>\n          <button class="btn btn-default btn-block" t="Add todo" click.trigger="addTodo(list)"></button>\n        </div>\n      </div>\n    </div>\n    <div class="col-md-3" if.bind="lists.length < 4">\n      <a class="btn-block btn btn-primary pull-right" t="Create list" href="#/lists/create"></a>\n    </div>\n  </div>\n</template>\n'})}(),System.register("page/todo/list.js",["aurelia-dependency-injection","aurelia-orm","aurelia-notification","aurelia-validation"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.inject,e=a.NewInstance},function(a){f=a.EntityManager},function(a){g=a.Notification},function(a){h=a.ValidationController}],execute:function(){a("List",(i=d(f,g,e.of(h)),k=i(j=function(){function a(b,d,e){c(this,a),this.notification=d,this.listRepository=b.getRepository("list"),this.entityManager=b,this.controller=e}return a.prototype.attached=function(){var a=this;return this.listRepository.find().then(function(b){return a.lists=b})},a.prototype.destroy=function(a){var b=this,c=this.lists[a];c.destroy().then(function(){b.lists.splice(a,1),b.notification.success("List deleted successfully!")}).catch(function(){b.notification.error("Something went wrong!")})},a.prototype.save=function(a){var b=this;a.save().then(function(){b.notification.success("List saved successfully!")}).catch(function(){b.notification.error("Something went wrong!")})},a.prototype.destroyTodo=function(a,b){var c=this;a.todos.splice(b,1),a.save().then(function(){c.notification.success("Todo removed successfully!")}).catch(function(){c.notification.error("Something went wrong!")})},a.prototype.addTodo=function(a){var b=this,c=this.entityManager.getEntity("todo");c.todo=prompt("What is it you need to do?"),c.validate().then(function(d){if(0===d.length)return a.save().then(function(){b.notification.success("Todo created successfully!"),a.todos.push(c)});throw d[0]}).catch(function(a){b.notification.error("Something went wrong! - "+a.message)})},a.prototype.updated=function(a){var b=this;return a.done=!a.done,a.save().then(function(){b.notification.success("Todo saved successfully!")}).catch(function(){b.notification.error("Something went wrong!")}),!0},a.prototype.keypress=function(a,b){return 13!==a.which||(a.preventDefault(),this.save(b))},a}())||j)),a("List",k)}}});